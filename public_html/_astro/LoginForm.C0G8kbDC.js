import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.DiEladB3.js";function b(){const[n,u]=a.useState(""),[x,i]=a.useState(""),[s,m]=a.useState(null),[f,c]=a.useState(!1);a.useEffect(()=>{const t=localStorage.getItem("last_logged_user");if(t)try{const r=JSON.parse(t);r&&r.name&&m(r)}catch{console.error("Error al cargar usuario reciente")}},[]);const d=async(t,r)=>{t.preventDefault();const h={user:r||n,pass:x};try{const l=await fetch("/api/auth/login.php",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json"}}),o=await l.json();l.ok&&o.success?(localStorage.setItem("user_session",JSON.stringify(o.user)),window.location.href="/feed"):alert(o.message||"Contraseña incorrecta")}catch(l){console.error("Error:",l)}};return e.jsxs("div",{className:"min-h-screen bg-[#f0f2f5] flex items-center justify-center font-sans",children:[e.jsxs("div",{className:"max-w-[980px] w-full px-4 flex flex-col lg:flex-row items-center justify-between gap-12 lg:mb-24",children:[e.jsxs("div",{className:"lg:w-[580px] text-center lg:text-left",children:[e.jsx("h1",{className:"text-[#1877f2] text-6xl font-black tracking-tighter mb-4",children:"facebook"}),s&&s.name?e.jsxs("div",{children:[e.jsx("h2",{className:"text-[28px] text-[#1c1e21] font-medium leading-8",children:"Inicios de sesión recientes"}),e.jsx("p",{className:"text-[#606770] text-[15px] mb-5",children:"Haz clic en tu foto o añade una cuenta."}),e.jsx("div",{className:"flex gap-4 justify-center lg:justify-start",children:e.jsxs("div",{onClick:()=>c(!0),className:"w-40 h-52 bg-white rounded-lg border border-gray-300 overflow-hidden cursor-pointer hover:shadow-xl transition-shadow group",children:[e.jsx("div",{className:"h-40 overflow-hidden bg-gray-100",children:s.photo?e.jsx("img",{src:s.photo,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 text-gray-400 font-bold text-4xl",children:s.name?.[0]||"U"})}),e.jsx("div",{className:"h-12 flex items-center justify-center font-semibold text-gray-700",children:s.name.split(" ")[0]})]})})]}):e.jsx("p",{className:"text-[28px] leading-8 text-[#1c1e21] font-medium lg:pr-10",children:"Facebook te ayuda a comunicarte y compartir con las personas que forman parte de tu vida."})]}),e.jsx("div",{className:"w-full max-w-[396px]",children:e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-xl",children:e.jsxs("form",{onSubmit:t=>d(t),className:"flex flex-col gap-4",children:[e.jsx("input",{type:"text",placeholder:"Correo electrónico o número de teléfono",className:"w-full p-3.5 border border-gray-300 rounded-md outline-none focus:border-[#1877f2]",value:n,onChange:t=>u(t.target.value),required:!0}),e.jsx("input",{type:"password",placeholder:"Contraseña",className:"w-full p-3.5 border border-gray-300 rounded-md outline-none focus:border-[#1877f2]",onChange:t=>i(t.target.value),required:!0}),e.jsx("button",{type:"submit",className:"w-full bg-[#1877f2] text-white py-3 rounded-md text-xl font-bold hover:bg-[#166fe5]",children:"Iniciar sesión"}),e.jsx("hr",{className:"my-2"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"button",className:"bg-[#42b72a] text-white px-4 py-3 rounded-md font-bold text-[17px]",children:"Crear una cuenta"})})]})})})]}),f&&s&&s.name&&e.jsx("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-sm z-[1000] flex items-center justify-center animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-[400px] rounded-lg shadow-2xl border relative overflow-hidden p-8 flex flex-col items-center",children:[e.jsx("button",{onClick:()=>c(!1),className:"absolute top-2 right-4 text-3xl text-gray-400 hover:text-black",children:"×"}),e.jsxs("h3",{className:"text-xl font-semibold mb-6",children:["Iniciar sesión como ",s.name.split(" ")[0]]}),e.jsx("div",{className:"w-40 h-40 rounded-lg overflow-hidden mb-6 border",children:s.photo?e.jsx("img",{src:s.photo,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center text-5xl",children:s.name?.[0]})}),e.jsxs("form",{onSubmit:t=>d(t,s.username),className:"w-full space-y-4",children:[e.jsx("input",{autoFocus:!0,type:"password",placeholder:"Contraseña",className:"w-full p-3 border border-gray-300 rounded-md outline-none focus:ring-2 focus:ring-blue-500",onChange:t=>i(t.target.value),required:!0}),e.jsx("button",{type:"submit",className:"w-full bg-[#1877f2] text-white py-3 rounded-md font-bold text-lg hover:bg-[#166fe5]",children:"Iniciar sesión"})]})]})})]})}export{b as default};
