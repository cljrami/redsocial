import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.DiEladB3.js";import{c as a}from"./createLucideIcon.rW8VcTAn.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],w=a("bell",N);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],C=a("chevron-right",_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],E=a("circle-question-mark",z);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],M=a("house",S);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],O=a("log-out",A);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],I=a("moon",$);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],U=a("search",B);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],F=a("settings",L);function q(){const[f,i]=r.useState([]),[m,x]=r.useState(!1),[l,c]=r.useState(!1),[d,p]=r.useState(0),[t,y]=r.useState({}),h=r.useRef(null);r.useEffect(()=>{const s=n=>{h.current&&!h.current.contains(n.target)&&c(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const g=async()=>{const s=JSON.parse(localStorage.getItem("user_session")||"{}");if(s.id){y(s);try{const o=await(await fetch(`/api/notifications/get.php?user_id=${s.id}`)).json();if(Array.isArray(o)){i(o);const b=o.filter(k=>parseInt(k.is_read)===0).length;p(b)}}catch(n){console.error("Error al obtener notificaciones:",n)}}};r.useEffect(()=>{g();const s=setInterval(g,3e4);return()=>clearInterval(s)},[]);const j=()=>{if(t&&(t.full_name||t.name)){const s={name:t.full_name||t.name,photo:t.profile_photo||null,username:t.username||t.full_name||t.name};localStorage.setItem("last_logged_user",JSON.stringify(s))}localStorage.removeItem("user_session"),window.location.href="/"},v=async()=>{const s=!m;if(x(s),s&&c(!1),s&&d>0){const n=new FormData;n.append("user_id",t.id);try{(await(await fetch("/api/notifications/mark_read.php",{method:"POST",body:n})).json()).success&&p(0)}catch(o){console.error("Error al marcar como leídas:",o)}}};return e.jsxs("nav",{className:"fixed top-0 inset-x-0 h-14 bg-white dark:bg-[#242526] border-b dark:border-[#3E4042] z-[500] px-4 flex items-center justify-between font-sans shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-blue-600 p-1.5 rounded-lg text-white font-black text-xl",children:"F"}),e.jsxs("div",{className:"hidden sm:flex items-center bg-gray-100 dark:bg-[#3A3B3C] px-3 py-2 rounded-full gap-2",children:[e.jsx(U,{size:18,className:"text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Buscar...",className:"bg-transparent outline-none text-sm dark:text-white w-24 md:w-48"})]})]}),e.jsx("div",{className:"flex items-center h-full",children:e.jsx("a",{href:"/feed",className:"h-full px-6 md:px-12 flex items-center border-b-4 border-blue-600 text-blue-600 transition-all",children:e.jsx(M,{size:28})})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:v,className:`p-2 rounded-full transition-colors relative ${m?"bg-blue-50 text-blue-600":"bg-gray-200 dark:bg-[#3A3B3C] text-gray-700 dark:text-gray-200 hover:bg-gray-300"}`,children:[e.jsx(w,{size:22}),d>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-[11px] font-bold px-1.5 min-w-[18px] h-[18px] flex items-center justify-center rounded-full border-2 border-white dark:border-[#242526] animate-in zoom-in",children:d})]})}),e.jsxs("div",{className:"relative",ref:h,children:[e.jsx("button",{onClick:()=>{c(!l),x(!1)},className:`w-10 h-10 rounded-full bg-gray-200 overflow-hidden border-2 transition-all ${l?"border-blue-500":"border-transparent hover:border-gray-300"}`,children:t.profile_photo?e.jsx("img",{src:t.profile_photo,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full font-bold text-gray-600 dark:text-gray-300 uppercase",children:t.full_name?.[0]||t.name?.[0]||"U"})}),l&&e.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white dark:bg-[#242526] shadow-2xl rounded-xl border dark:border-[#3E4042] p-2 animate-in fade-in zoom-in-95 z-[600]",children:[e.jsxs("a",{href:"/perfil",className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-[#3A3B3C] transition-colors mb-2 shadow-sm border dark:border-[#3E4042]",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-300 overflow-hidden flex-shrink-0",children:t.profile_photo?e.jsx("img",{src:t.profile_photo,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full font-bold",children:t.full_name?.[0]||t.name?.[0]||"U"})}),e.jsx("span",{className:"font-bold text-[17px] dark:text-white truncate",children:t.full_name||t.name||"Usuario"})]}),e.jsx("div",{className:"border-t dark:border-[#3E4042] my-2"}),e.jsx(u,{icon:e.jsx(F,{size:20}),title:"Configuración y privacidad"}),e.jsx(u,{icon:e.jsx(E,{size:20}),title:"Ayuda y soporte técnico"}),e.jsx(u,{icon:e.jsx(I,{size:20}),title:"Pantalla y accesibilidad"}),e.jsxs("button",{onClick:j,className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-[#3A3B3C] transition-colors mt-1",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-200 dark:bg-[#4E4F50] flex items-center justify-center dark:text-white",children:e.jsx(O,{size:20})}),e.jsx("span",{className:"font-semibold text-[15px] dark:text-white",children:"Cerrar sesión"})]})]})]})]})]})}function u({icon:f,title:i}){return e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-[#3A3B3C] cursor-pointer transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-200 dark:bg-[#4E4F50] flex items-center justify-center dark:text-white",children:f}),e.jsx("span",{className:"font-semibold text-[15px] dark:text-white",children:i})]}),e.jsx(C,{size:18,className:"text-gray-500 group-hover:text-gray-700"})]})}export{q as default};
