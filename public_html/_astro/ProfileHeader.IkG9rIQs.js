import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as p}from"./index.DiEladB3.js";import{c as u}from"./createLucideIcon.rW8VcTAn.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],m=u("camera",x);function v(){const[s,h]=p.useState({id:null,name:"Usuario",profile_photo:"",cover_photo:""}),o=()=>{const r=JSON.parse(localStorage.getItem("user_session")||"{}");h({id:r.id||null,name:r.name||"Usuario",profile_photo:r.profile_photo||"",cover_photo:r.cover_photo||""})};p.useEffect(()=>(o(),window.addEventListener("user_session_updated",o),()=>window.removeEventListener("user_session_updated",o)),[]);const a=async(r,i)=>{const d=r.target.files?.[0];if(!d||!s.id)return;const t=new FormData;t.append("photo",d),t.append("type",i),t.append("user_id",s.id.toString());try{const n=await(await fetch("/api/user/update_photos.php",{method:"POST",body:t})).json();if(n.success){const c=JSON.parse(localStorage.getItem("user_session")||"{}");c[i==="profile"?"profile_photo":"cover_photo"]=n.url,localStorage.setItem("user_session",JSON.stringify(c)),window.dispatchEvent(new Event("user_session_updated"))}}catch(l){console.error("Error al subir la imagen:",l)}};return e.jsx("div",{className:"bg-white dark:bg-[#242526] shadow-sm border-b dark:border-[#3E4042]",children:e.jsxs("div",{className:"max-w-[940px] mx-auto",children:[e.jsxs("div",{className:"h-[200px] md:h-[350px] bg-gray-200 dark:bg-[#3A3B3C] relative overflow-hidden md:rounded-b-xl group",children:[s.cover_photo&&e.jsx("img",{src:s.cover_photo,className:"w-full h-full object-cover",alt:"Portada"}),e.jsxs("label",{className:"absolute bottom-4 right-4 bg-white dark:bg-[#4E4F50] px-4 py-2 rounded-lg shadow-md cursor-pointer flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-[#5E5F60] transition-all font-bold dark:text-white z-20",children:[e.jsx(m,{size:20}),e.jsx("span",{className:"hidden md:inline text-sm",children:"Editar foto de portada"}),e.jsx("input",{type:"file",className:"hidden",onChange:r=>a(r,"cover"),accept:"image/*"})]})]}),e.jsxs("div",{className:"px-4 pb-6 flex flex-col items-center md:items-end md:flex-row -mt-12 md:-mt-16 relative z-10 gap-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-32 h-32 md:w-40 md:h-40 rounded-full border-4 border-white dark:border-[#242526] bg-gray-800 overflow-hidden shadow-xl flex items-center justify-center text-white text-5xl font-bold",children:s.profile_photo?e.jsx("img",{src:s.profile_photo,className:"w-full h-full object-cover",alt:"Perfil"}):e.jsx("span",{children:s.name[0]?.toUpperCase()})}),e.jsxs("label",{className:"absolute bottom-2 right-2 bg-gray-200 dark:bg-[#3A3B3C] p-2 rounded-full border-4 border-white dark:border-[#242526] cursor-pointer shadow-md hover:scale-110 transition-transform z-20 flex items-center justify-center",children:[e.jsx(m,{size:20,className:"dark:text-white"}),e.jsx("input",{type:"file",className:"hidden",onChange:r=>a(r,"profile"),accept:"image/*"})]})]}),e.jsxs("div",{className:"text-center md:text-left flex-1 pb-2",children:[e.jsx("h1",{className:"text-3xl font-extrabold dark:text-white",children:s.name}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-bold",children:"0 seguidores â€¢ 0 seguidos"})]})]})]})})}export{v as default};
